# Assumptions:
# - Gathering data via SNMP is slow
# - Higher-level data is more important than lower-level one (better to get RAID group status than individual disk status)

modules:
  qnap: # only queries that are performed with snmpget
    walk:
        # Needed by dashboard
        - systemFreeMem
        - systemAvailableMem
        - systemCacheMemory
        - systemBufferMemory
        - systemTotalMem
        - systemUsedMemory
        - systemCPU-UsageEX
        - cacheAccelerationServiceEnabled
        - cacheAvailablePercent
        - cacheReadHitRate
        - cacheWriteHitRate
        - cpuTemperature
        - systemTemperatureEX
        - systemUptimeEX
        - sysUPSStatus
        - firmwareUpgradeAvailable
  qnaplong: # only queries that are performed with snmpwalk
    walk:
      # Needed by dashboard
      - diskSmartInfo  # abnormal(2), warning(1), good(0), error(-1)
      - raidStatus
      - volumeStatus
      - volumeCapacity
      - volumeFreeSize
      - storagepoolStatus
      - storagepoolCapacity
      - storagepoolFreeSize
      - ifPacketsReceivedEX
      - ifPacketsSentEX
      - ifErrorPacketsEX
      - iops     # Disk IOps
      - latency  # Disk latency
      - cpuUsage
      - diskTemperture
      - enclosureSystemTemp
      - sysFanSpeedEX # TODO: consider removing
    overrides: # 0 is critical, 1 is normal, 0< is abnormal
      raidStatus:
        regex_extracts:
          '':
            - regex: 'Ready'
              value: 1
            - regex: 'Degraded'
              value: 0
            - regex: 'Rebuilding.*'
              value: -1
            - regex: 'Migrating.*'
              value: -2
      volumeStatus:
        regex_extracts:
          '':
            - regex: 'Good'
              value: 1
            - regex: 'Error'
              value: 0
            - regex: 'Warning.*'
              value: -1

# Additional objects that were checked before but are not used:
# - raidCapacity  # storagepoolCapacity and volumeCapacity are more important
# - raidFreeSize  # storagepoolFreeSize and volumeFreeSize are more important
# - ifPacketsReceived  # Same as ifPacketsReceivedEX
# - ifPacketsSent   # Same as ifPacketsSentEX
# - ifErrorPackets  # Same as ifErrorPacketsEX
# - lunCapacity # FIXME: no luns at the moment
# - lunUsedPercent # FIXME: no luns at the moment
# - lunStatus # FIXME: This is a string and needs overrides
# - lunBackupStatus # FIXME: This is a string and needs overrides
# - diskStatus  # FIXME: This needs overrides, but it doesn't look useful when all disks are in RAID groups
# - diskCapacity # Not needded as all disks are in RAID groups
# - hdTemperatureEX  # same as diskTemperture
# - sysVolumeTotalSizeEX # same as volumeCapacity
# - sysVolumeFreeSizeEX # same as volumeFreeSize
# - sysVolumeStatusEX # same as volumeStatus
# - cpuTemp  # This is usually 1-2deg lower than cpuTemperature
# - cacheStatus